<!DOCTYPE html><html lang="en" class="app" xmlns:th="http://www.thymeleaf.org"><head>    <meta charset="utf-8"/>    <title>ME+企业用户管理</title>    <meta name="description"          content="app, web app, responsive, admin dashboard, admin, flat, flat ui, ui kit, off screen nav"/>    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>    <link rel="stylesheet" href="/css/bootstrap.css" type="text/css"/>    <link rel="stylesheet" href="/css/animate.css" type="text/css"/>    <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css"/>    <link rel="stylesheet" href="/css/simple-line-icons.css" type="text/css"/>    <link rel="stylesheet" href="/css/font.css" type="text/css"/>    <link rel="stylesheet" href="/css/app.css" type="text/css"/>    <link rel="stylesheet" href="/css/default.css" type="text/css"/>    <link rel="stylesheet" href="/css/marquee.css" type="text/css"/>    <link rel="stylesheet" href="/css/normalize.css" type="text/css"/>    <link rel="stylesheet" type="text/css" href="/css/zeroModal.css"/>    <link rel="stylesheet" href="/css/font-awesome.min.css"/>    <link rel="stylesheet" href="http://resource.mjiahome.com/mj/static/css/vmask.css" type="text/css"/>    <!--[if lt IE 9]>    <script src="js/ie/html5shiv.js"></script>    <script src="js/ie/respond.min.js"></script>    <script src="js/ie/excanvas.js"></script>    <![endif]--></head><body class=""><section class="vbox">    <header class="bg-white-only header header-md navbar navbar-fixed-top-xs">        <div class="navbar-header aside bg-info dk">            <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen,open" data-target="#nav,html">                <i class="icon-list"></i>            </a>            <a href="index.html" class="navbar-brand text-lt">                <i class="icon-earphones"></i>                <img src="/images/logo.png" alt="." class="hide"/>                <span class="hidden-nav-xs m-l-sm">ME+</span>            </a>            <a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".user">                <i class="icon-settings"></i>            </a>        </div>        <ul class="nav navbar-nav hidden-xs">            <li>                <a href="#nav,.navbar-header" data-toggle="class:nav-xs,nav-xs" class="text-muted">                    <i class="fa fa-indent text"></i>                    <i class="fa fa-dedent text-active"></i>                </a>            </li>        </ul>        <form class="navbar-form navbar-left input-s-lg m-t m-l-n-xs hidden-xs" role="search">            <div class="form-group" style="display: none">                <div class="input-group">            <span class="input-group-btn">              <button type="submit" class="btn btn-sm bg-white btn-icon rounded"><i class="fa fa-search"></i></button>            </span>                    <input type="text" class="form-control input-sm no-border rounded"                           placeholder="ME+搜索"/>                </div>            </div>        </form>        <div class="navbar-right ">            <ul class="nav navbar-nav m-n hidden-xs nav-user user">                <li class="hidden-xs" style="display: none">                    <a href="#" class="dropdown-toggle lt" data-toggle="dropdown">                        <i class="icon-bell"></i>                        <span class="badge badge-sm up bg-danger count">2</span>                    </a>                    <section class="dropdown-menu aside-xl animated fadeInUp">                        <section class="panel bg-white">                            <div class="panel-heading b-light bg-light">                                <strong>You have <span class="count">2</span> notifications</strong>                            </div>                            <div class="list-group list-group-alt">                                <a href="#" class="media list-group-item">                    <span class="pull-left thumb-sm">                      <img src="/images/a0.png" alt="..." class="img-circle"/>                    </span>                                    <span class="media-body block m-b-none">                      Use awesome animate.css<br/>                      <small class="text-muted">10 minutes ago</small>                    </span>                                </a>                                <a href="#" class="media list-group-item">                    <span class="media-body block m-b-none">                      1.0 initial released<br/>                      <small class="text-muted">1 hour ago</small>                    </span>                                </a>                            </div>                            <div class="panel-footer text-sm">                                <a href="#" class="pull-right"><i class="fa fa-cog"></i></a>                                <a href="#notes" data-toggle="class:show animated fadeInRight">See all the                                    notifications</a>                            </div>                        </section>                    </section>                </li>                <li class="dropdown">                    <a href="#" class="dropdown-toggle bg clear" data-toggle="dropdown">                          <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">                            <img src="/images/a0.png" th:attr="src=${session.user.getAvatar()}" alt="..."/>                          </span>                        <span th:text="${session.user.getNickName()}"></span><b class="caret"></b>                    </a>                    <ul class="dropdown-menu animated fadeInRight">                        <li>                            <a href="/html/logout.html">Logout</a>                        </li>                    </ul>                </li>            </ul>        </div>    </header>    <section>        <section class="hbox stretch">            <aside class="bg-black dk aside hidden-print" id="nav">                <section class="vbox">                    <section class="w-f-md scrollable">                        <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0"                             data-size="10px" data-railOpacity="0.2">                            <!-- nav -->                            <nav class="nav-primary hidden-xs">                                <ul class="nav" data-ride="collapse">                                    <li class="active">                                        <a href="#" class="auto"><span class="pull-right text-muted"><i                                                class="fa fa-angle-left text"></i><i                                                class="fa fa-angle-down text-active"></i></span><i                                                class="icon-grid icon"></i><span>平台后台1.0</span> </a>                                        <ul class="nav dk text-sm">                                            <li><a href="/html/platform/order.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>预约－租借管理</span></a></li>                                        </ul>                                    </li>                                </ul>                            </nav>                        </div>                    </section>                </section>            </aside>            <section id="content">                <section class="vbox">                    <section class="scrollable padder">                        <div class="m-b-md">                            <h3 class="m-b-none"></h3>                        </div>                        <section class="panel panel-default">                            <header class="panel-heading">                                <h4>预约－租借管理                                </h4>                            </header>                            <div class="row wrapper">                                <div class="btn-group col-sm-4 m-b-xs">                                </div>                                <!-- <div class="btn-group col-sm-2 m-b-xs"> -->                                <!-- <button class="btn btn-default" value="-1" id="product_type">所有房源</button>                                <button class="btn btn-default dropdown-toggle"                                        data-toggle="dropdown">                                    <span class="caret"></span></button>                                <ul class="dropdown-menu">                                    <li>                                        <a onclick="product_status(-1,'所有房源')"                                           href="javascript:void(0)">所有房源</a>                                    </li>                                    <li><a onclick="product_status(0,'未来一个月内到期房源')"                                           href="javascript:void(0)">未来一个月到期房源</a>                                    </li>                                    <li><a onclick="product_status(1,'未来3d内到期房源')"                                           href="javascript:void(0)">未来三天内到期房源</a></li>                                </ul> -->                                <div class="col-sm-1 btn-group">                                    <span class="col-md-2 text-left"><button type="button" class="btn btn-default"                                                                             id="nextThreeDay">未来3d内到期房源</button></span>                                </div>                                <div class="col-sm-1 btn-group">                                    <span class="col-md-2 text-right"><button type="button" class="btn btn-default"                                                                              id="nextMonth">未来一个月内到期房源</button></span>                                </div>                                <!-- </div> -->                                <div class="btn-group col-sm-1 m-b-xs">                                    <button id="orderStatus" class="btn btn-default" value="-1">订单状态</button>                                    <button class="btn btn-default dropdown-toggle"                                            data-toggle="dropdown">                                        <span class="caret"></span></button>                                    <ul class="dropdown-menu">                                        <li>                                            <a onclick="order_status(-1,'订单状态')"                                               href="javascript:void(0)">所有订单</a>                                        </li>                                        <li><a onclick="order_status(0,'新预约')" href="javascript:void(0)">新预约</a>                                        </li>                                        <li><a onclick="order_status(1,'确认中')"                                               href="javascript:void(0)">确认中</a></li>                                        <li><a onclick="order_status(0,'已经确认')"                                               href="javascript:void(0)">已确认</a>                                        </li>                                        <li><a onclick="order_status(1,'入住')"                                               href="javascript:void(0)">已入住</a></li>                                        <li><a onclick="order_status(0,'结束')"                                               href="javascript:void(0)">已结束</a>                                        </li>                                        <li><a onclick="order_status(1,'取消')"                                               href="javascript:void(0)">已取消</a></li>                                    </ul>                                </div>                                <div class="col-sm-1 m-b-xs">                                    <div class="input-group">                                        <input type="text" class="form-control" placeholder="产品名称" id="productName"/>                                    </div>                                </div>                                <div class="col-sm-1 m-b-xs">                                    <div class="input-group">                                        <input type="text" class="form-control" placeholder="用户ID" id="biller"/>                                    </div>                                </div>                                <div class="col-sm-1 m-b-xs">                                    <div class="input-group">                                        <input type="text" class="form-control" placeholder="房源名称" id="houseSubject"/>                                    </div>                                </div>                                <div class="col-sm-1 btn-group">                                    <button class="btn btn-primary btn-s-md"                                            id="btn_search">查询                                    </button>                                </div>                            </div>                            <div class="table-responsive" style="font-size:12px;">                                <div class="container">                                    <div class="marquee">                                        <ul class="marquee-content-items" id='marquee'>                                            <li>新预约：订单111111111111</li>                                            <li>新预约：订单222222222222</li>                                            <li>新预约：订单333333333333</li>                                            <li>新预约：订单444444444444</li>                                            <li>新预约：订单555555555555</li>                                        </ul>                                    </div>                                </div>                                <table class="table table-striped b-t b-light">                                    <thead>                                    <tr style="height: 40px;">                                        <th class="text-center" style="vertical-align: middle">订单ID</th>                                        <th class="text-center" style="vertical-align: middle">产品名称</th>                                        <th class="text-center" style="vertical-align: middle">房源名称</th>                                        <th class="text-center" style="vertical-align: middle">用户ID</th>                                        <th class="text-center" style="vertical-align: middle">首付订单金额</th>                                        <th class="text-center" style="vertical-align: middle">押金金额</th>                                        <th class="text-center" style="vertical-align: middle">首付房租金额</th>                                        <th class="text-center" style="vertical-align: middle">平台应收款</th>                                        <th class="text-center" style="vertical-align: middle">供应商应收款</th>                                        <th class="text-center" style="vertical-align: middle">租借周期</th>                                        <th class="text-center" style="vertical-align: middle">是否平台押金托管</th>                                        <th class="text-center" style="vertical-align: middle">线上／线下支付</th>                                        <th class="text-center" style="vertical-align: middle">线上支付渠道</th>                                        <th class="text-center" style="vertical-align: middle">线上支付账户</th>                                        <th class="text-center" style="vertical-align: middle">线上支付时间</th>                                        <th class="text-center" style="vertical-align: middle">订单状态</th>                                        <th class="text-center" style="vertical-align: middle">最后处理时间</th>                                        <th class="text-center" style="vertical-align: middle">操作</th>                                    </tr>                                    </thead>                                    <tbody id="table_body">                                    </tbody>                                </table>                            </div>                            <footer class="panel-footer">                                <div class="row">                                    <div class="col-sm-4 hidden-xs">                                    </div>                                    <div class="col-sm-4 text-center">                                    </div>                                    <div class="col-sm-4 text-right text-center-xs">                                        <ul id="page_index" class="pagination pagination-sm m-t-none m-b-none">                                        </ul>                                    </div>                                </div>                            </footer>                            <div class="mask" id="mask"></div>                            <div class="vmask"></div>                        </section>                        <div class="m-b-md">                            <div class="text-center padder clearfix">                                <p>                                    <small>上海寓伽信息科技有限公司&nbsp;&copy;2017</small>                                </p>                            </div>                        </div>                    </section>                </section>                <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen,open"                   data-target="#nav,html"></a>            </section>        </section>    </section></section><script src="/js/jquery.min.js"></script><script src="/js/marquee.js"></script><script src="/js/zeroModal.min.js"></script><script src="http://resource.mjiahome.com/mj/static/oss_js/vmask.js"></script><script src="/js/foundation-datepicker.min.js"></script><script src="/js/foundation-datepicker.zh-CN.js"></script><script src="/js/moment.min.js" type="text/javascript"></script><script src="/js/jquery.daterangepicker.min.js"></script><script type="application/javascript" th:inline="javascript">    var mask = new Mask();    var dataSubmit = '';    var pageSize = 20;    var pageNow = 1;    var total = 0;    var pageNum = 1;    var days = '';    var months = '';    /* var timeStart='';    var timeEnd='';    var depositBoolean=''; */    var panelButton = '<p class="text-center"><button type="button" class="btn btn-primary btn-sm" onclick="buttonConfirm()">确认</button>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="btn btn-primary btn-sm" onclick="buttonCancel()">取消</button></p>';    var backButton = '<p class="text-center"><button type="button" class="btn btn-primary btn-sm" onclick="backConfirm()">确认</button>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="btn btn-primary btn-sm" onclick="buttonCancel()">取消</button></p>';    var spanHead = '<div class="panel-heading">确认订单</div>';    $(function () {        requestOrderList();        createMarquee({});        $("#btn_search").click(function () {            pageNow = 1;            months = '';            days = '';            requestOrderList();        });        $("#optionsRadios").click(function () {            depositBoolean = $("#optionsRadios").val();        });        $("#nextThreeDay").click(function () {            initParam();            days = 3;            requestOrderList();        });        $("#nextMonth").click(function () {            initParam();            months = 1;            requestOrderList();        });        /* $('#startTime').fdatepicker({            format: 'yyyy-mm-dd',            pickTime: false        });        $('#endTime').fdatepicker({            format: 'yyyy-mm-dd',            pickTime: false        }); */    });    function calPageNum() {        if (total == 0) {            pageNum = 1;        }        if (total % pageSize == 0) {            pageNum = total / pageSize;        } else {            pageNum = parseInt(total / pageSize) + 1;        }        $('#page_index').empty();        var pre = '<div class="btn-group m-b-sm">' +            '<button type="button" onclick="pagePrevious()" class="btn btn-default"><i class="fa fa-arrow-left"></i></button>';        var center = '';        for (var index = 1; index <= pageNum; index++) {            if (index == pageNow) {                center += '<button type="button" onclick="pageClear(' + index + ')" class="btn btn-success">' + index + '</button>';            } else {                center += '<button type="button" onclick="pageClear(' + index + ')" class="btn btn-default">' + index + '</button>';            }        }        var follow = '<button type="button" onclick="pageFollowing()" class="btn btn-default"><i class="fa fa-arrow-right"></i></button>' +            '</div>';        $('#page_index').append(pre + center + follow);    }    function pagePrevious() {        pageNow--;        requestOrderList();    }    function pageFollowing() {        pageNow++;        requestOrderList();    }    function pageClear(page) {        pageNow = page;        requestOrderList();    }    function requestOrderList() {        if (pageNow < 1) {            pageNow = 1;        }        if (pageNow > pageNum) {            pageNow = pageNum;        }        var data = {            'pageNow': pageNow,            'pageSize': pageSize        };        var orderStatus = $("#orderStatus").val();        var productName = $("#productName").val();        var houseSubject = $("#houseSubject").val();        var orderStatus = $("#orderStatus").val();        var biller = $("#biller").val();        if (orderStatus != -1) {            data['orderStatus'] = orderStatus;        }        if (productName != '') {            data['productName'] = productName;        }        if (houseSubject != '') {            data['houseSubject'] = houseSubject;        }        if (biller != '') {            data['biller'] = biller;        }        if (days != '') {            data['days'] = days;        }        if (months != '') {            data['months'] = months;        }        data['supplierId'] = [[${session.user.supplierId}]];        $.ajax({            type: "POST",            async: true,            url: "/api/order/list",            contentType: "application/json",            data: JSON.stringify(data),            dataType: "json",            success: function (ret) {                console.log(JSON.stringify(data));                console.log(ret);                $("#table_body").empty();                total = ret['totalCount'];                $.each(ret['result'], function (item, val) {                    buildTr(val);                });                $("#span_total").html(total);                calPageNum();            },            error: function (message) {            }        });    }    function buildTr(item) {        var platformHostStr = item['platformHost'];        var payOnlineStr = item['payOnline'];        var orderStatus = item['orderStatus'];        var orderId = item['orderId'];        var productId = item['productId'];        var houseId = item['houseId'];        var depositBack = item['depositBack'];        var startTime = item['startTime'];        var endTime = item['endTime'];        var platformHost = '是';        var payOnline = '线上';        var period = '';        if (!platformHostStr) {            platformHost = '不是';        }        if (!payOnlineStr) {            payOnline = '线下';        }        var operation = '<a class="btn btn-xs btn-success btn-rounded" id="orderBegin" onclick="orderBegin(\'' + orderId + '\')">开始处理</a>｜<a class="btn btn-xs btn-success btn-rounded" id="orderCancel" onclick="orderCancel(\'' + orderId + '\')">取消订单</a>';        if (orderStatus == 1) {            //TODO   确认订单  需要加租赁期选择 和    是否押金托管的选择            operation = '<a class="btn btn-xs btn-success btn-rounded" id="orderConfirm" onclick="orderConfirm(\'' + orderId + '\')">确认订单</a>｜<a class="btn btn-xs btn-success btn-rounded" id="orderCancel" onclick="orderCancel(\'' + orderId + '\')">取消订单</a>';        }        if (orderStatus >= 2) {            operation = '<a class="btn btn-xs btn-success btn-rounded" id="updateRentTime" onclick="updateRentTime(\'' + orderId + '\')">变更租借周期</a>｜<a class="btn btn-xs btn-success btn-rounded" id="holdChoose" onclick="holdChoose(\'' + orderId + '\')">选择押金平台托管</a>｜<a class="btn btn-xs btn-success btn-rounded" id="orderCancel" onclick="orderCancel(\'' + orderId + '\')">取消订单</a>';        }        if (orderStatus == 5) {            if (!depositBack) {                if (platformHostStr)                    operation = '<a class="btn btn-xs btn-success btn-rounded" id="depositBack" onclick="depositBack(\'' + orderId + '\')">退还押金</a>';                else                    operation = '';            }            else {                operation = '<a class="btn btn-s-md btn-default btn-rounded disabled" >押金已退还</a>';            }        }        if (startTime != '' && endTime != '') {            period = startTime + '至<br>' + endTime;        }        var txt =            '<tr style="height: 60px;">' +            '<td style="vertical-align: middle" class="text-center"><input type="text" value="' + orderId + '"  style="width:93px; height:30px; border:none; font-size:14px; background:none; line-height:30px; overflow:hidden; display:block; word-wrap:break-word;" title="' + orderId + '" /></td>' +            '<td style="vertical-align: middle" class="text-center"><strong><a href="/html/platform/productInfo.html?op=update&code=' + productId + '">' + item['productName'] + '</a></strong></td>' +            '<td style="vertical-align: middle" class="text-center"><strong><a onclick="showHouse(' + houseId + ')">' + item['houseSubject'] + '</a></strong></td>' +            '<td style="vertical-align: middle" class="text-center"><strong><a href="/html/platform/users.html?code=' + item['biller'] + '">' + item['biller'] + '</a></strong></td>' +            '<td style="vertical-align: middle" class="text-center">' + (item['discountAmount'] * 0.01).toFixed(2) + '元</td>' +            '<td style="vertical-align: middle" class="text-center">' + (item['deposit'] * 0.01).toFixed(2) + '元</td>' +            '<td style="vertical-align: middle" class="text-center">' + (item['discountRent'] * 0.01).toFixed(2) + '元</td>' +            '<td style="vertical-align: middle" class="text-center">' + (item['platFormAmount'] * 0.01).toFixed(2) + '元</td>' +            '<td style="vertical-align: middle" class="text-center">' + (item['supplierAmount'] * 0.01).toFixed(2) + '元</td>' +            '<td style="vertical-align: middle" class="text-center">' + period + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + platformHost + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + payOnline + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + item['payTypeDesc'] + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + item['payAccount'] + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + item['payTime'] + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + item['orderStatusDesc'] + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + item['updateTime'] + '</td>' +            //'<td style="vertical-align: middle" class="text-center"><a href="/html/platform/companyinfo.html?op=update&code=' + item['companyId'] + '" class="btn btn-xs btn-success btn-rounded">编辑</a></td>' +            '<td style="vertical-align: middle" class="text-center">' + operation + '</td>' +            '</tr>';        $("#table_body").append(txt);    }    function showHouse(houseId) {        zeroModal.show({            iframe: true,            url: '/html/house/info?code=' + houseId,            width: '414px',            height: '736px',            cancel: true        });    }    function initParam() {        days = '';        months = '';    }    function order_status(code, msg) {        $("#orderStatus").attr("value", code);        $("#orderStatus").html(msg);        pageNow = 1;        requestOrderList();    }    function product_status(code, msg) {        if (code == '1') {            days = 3;        }        if (code == '0') {            months = 1;        }        $("#product_type").html(msg);        pageNow = 1;        requestOrderList();    }    function orderBegin(paramter) {        dataSubmit = {            'orderStatus': 1        };        dataSubmit['orderId'] = paramter;        console.log(dataSubmit['orderId']);        $(".vmask").append('<div class="panel-heading">处理订单</div>').append('<span>是否开始处理订单</span>').append(panelSpell('orderBegin'));        mask.show($(".vmask"));    }    function orderConfirm(orderId) {        dataSubmit = {            'orderStatus': 2        };        dataSubmit['orderId'] = orderId;        var timeAppend = '<div class="col-sm-2 m-b-xs"><input type="text" class="form-control" placeholder="入住起始时间" id="startTime"/></div><div class="col-sm-2 m-b-xs"><input type="text" class="form-control" placeholder="入住结束时间" id="endTime"/></div>';        var holdChooseAppend = '</br><span>是否选择押金平台托管：<label><input type="radio" name="optionsRadios" id="optionsRadios" value="true" checked>&nbsp;是</label>&nbsp;&nbsp;&nbsp;&nbsp;<label><input type="radio" name="optionsRadios" id="optionsRadios" value="false">&nbsp;否</label></span>';        /* var timeAppend='<span>租借周期&nbsp;&nbsp;<div class="col-sm-2 m-b-xs"><input type="text" class="form-control" placeholder="入住起始时间" id="startTime"/></br></div><div class="col-sm-2 m-b-xs"><input type="text" class="form-control" placeholder="入住结束时间" id="endTime"/>选择入住起始时间~入住结束时间，不得与房源可用时间重叠</span>'; */        //确认订单  需要加租赁期选择 和    是否押金托管的选择        $(".vmask").append('<div class="panel-heading">确认订单</div>').append('<span>租借周期&nbsp;&nbsp;' + timeAppend + '选择入住起始时间~入住结束时间，不得与房源可用时间重叠</span>').append(holdChooseAppend).append(panelSpell('orderConfirm')).append('<script>$(function () { $(\'#startTime\').fdatepicker({format: \'yyyy-mm-dd\',pickTime: false});$(\'#endTime\').fdatepicker({format: \'yyyy-mm-dd\',pickTime: false });});<\/script>');        mask.show($(".vmask"));    }    function updateRentTime(orderId) {//        dataSubmit = {};//        var timeAppend = '<div class="col-sm-2 m-b-xs"><input type="text" class="form-control" placeholder="入住起始时间" id="startTime"/></div><div class="col-sm-2 m-b-xs"><input type="text" class="form-control" placeholder="入住结束时间" id="endTime"/></div>';//        dataSubmit['orderId'] = orderId;//        $(".vmask").append('<div class="panel-heading">变更租借周期</div>').append('<span>租借周期&nbsp;&nbsp;' + timeAppend + '选择入住起始时间~入住结束时间，不得与房源可用时间重叠</span>').append(panelSpell('updateRentTime')).append('<script>$(function () { $(\'#startTime\').fdatepicker({format: \'yyyy-mm-dd\',pickTime: false});$(\'#endTime\').fdatepicker({format: \'yyyy-mm-dd\',pickTime: false });});<\/script>');//        mask.show($(".vmask"));        //TODO        //453,268        zeroModal.show({            title: '修改租赁时间',            iframe: true,            url: '/html/piece',            height: '35%',            resize: true        });    }    function holdChoose(orderId) {        dataSubmit = {};        dataSubmit['orderId'] = orderId;        $(".vmask").append('<div class="panel-heading">选择押金平台托管</div>').append('<span>是否选择押金平台托管：<label><input type="radio" name="optionsRadios" id="optionsRadios" value="true">&nbsp;是</label>&nbsp;&nbsp;&nbsp;&nbsp;<label><input type="radio" name="optionsRadios" id="optionsRadios" value="false" checked>&nbsp;否</label></span>').append(panelSpell('holdChoose'));        mask.show($(".vmask"));    }    function orderCancel(orderId) {        dataSubmit = {'orderStatus': 5};        dataSubmit['orderId'] = orderId;        $(".vmask").append('<div class="panel-heading">取消订单</div>').append('<span>是否取消订单</span>').append(panelSpell('orderCancel'));        mask.show($(".vmask"));    }    function depositBack(orderId) {        dataSubmit = {};        dataSubmit['orderId'] = orderId;        $(".vmask").append('<div class="panel-heading">订单退款</div>').append('<span>是否进行订单退款</span>').append(backButton);        mask.show($(".vmask"));    }    function buttonConfirm(operationType) {        console.log("operationType:" + operationType);        var startTime = $("#startTime").val();        console.log("startTime:" + startTime);        var endTime = $("#endTime").val();        console.log("endTime:" + endTime);        console.log("orderId:" + dataSubmit['orderId']);        /* var depositBoolean = $("#optionsRadios").val(); */        var depositBoolean = $("input[name='optionsRadios']:checked").val();        console.log("deposit:" + depositBoolean);        if (depositBoolean != '' && depositBoolean != 'undefined') {            dataSubmit['platformHost'] = depositBoolean;        }        if (startTime != '' && endTime != '' && startTime != 'undefined' && endTime != 'undefined') {            dataSubmit['startTime'] = startTime;            dataSubmit['endTime'] = endTime;        }        if (operationType == 'orderConfirm') {            if (startTime == '' || endTime == '' || startTime == 'undefined' || endTime == 'undefined') {                alert('确认订单需要输入时间');                return;            }        }        if (operationType == 'updateRentTime') {            if (startTime == '' || endTime == '' || startTime == 'undefined' || endTime == 'undefined') {                alert('修改租赁周期需要输入时间');                return;            }        }        console.log(JSON.stringify(dataSubmit));        $.ajax({            type: "POST",            async: true,            url: "/api/order/updateOrder",            contentType: "application/json",            data: JSON.stringify(dataSubmit),            dataType: "json",            success: function (ret) {                pageClear(pageNow)            },            error: function (message) {                alert("订单更新出错:" + message);            }        });        dataSubmit = '';        $(".vmask").empty();        mask.close($(".vmask"));    }    function buttonCancel() {        dataSubmit = '';        $(".vmask").empty();        mask.close($(".vmask"));    }    function backConfirm() {        $.ajax({            type: "POST",            async: true,            url: "/api/order/refundOrder",            contentType: "application/json",            data: JSON.stringify(dataSubmit),            dataType: "json",            success: function (ret) {                pageClear(pageNow)            },            error: function (message) {                alert("订单退款出错:" + message);            }        });        dataSubmit = '';        $(".vmask").empty();        mask.close($(".vmask"));    }    function panelSpell(operationType) {        console.log("spellOperationType:" + operationType);        var panelButton = '<p class="text-center"><button type="button" class="btn btn-primary btn-sm" onclick="buttonConfirm(\'' + operationType + '\')">确认</button>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="btn btn-primary btn-sm" onclick="buttonCancel()">取消</button></p>';        return panelButton;    }    Date.prototype.format = function (fmt) {        var o = {            "M+": this.getMonth() + 1,                 //月份            "d+": this.getDate(),                    //日            "h+": this.getHours(),                   //小时            "m+": this.getMinutes(),                 //分            "s+": this.getSeconds(),                 //秒            "q+": Math.floor((this.getMonth() + 3) / 3), //季度            "S": this.getMilliseconds()             //毫秒        };        if (/(y+)/.test(fmt)) {            fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));        }        for (var k in o) {            if (new RegExp("(" + k + ")").test(fmt)) {                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));            }        }        return fmt;    }</script><!-- Bootstrap --><script src="/js/bootstrap.js"></script><!-- App --><script src="/js/app.js"></script><script src="/js/slimscroll/jquery.slimscroll.min.js"></script><script src="/js/app.plugin.js"></script></body></html>