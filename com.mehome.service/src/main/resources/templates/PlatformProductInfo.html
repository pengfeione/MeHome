<!DOCTYPE html><html lang="en" class="app" xmlns:th="http://www.thymeleaf.org"><head>    <meta charset="utf-8"/>    <title>ME+企业用户管理</title>    <meta name="description"          content="app, web app, responsive, admin dashboard, admin, flat, flat ui, ui kit, off screen nav"/>    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>    <link rel="stylesheet" href="/css/bootstrap.css" type="text/css"/>    <link rel="stylesheet" href="/css/animate.css" type="text/css"/>    <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css"/>    <link rel="stylesheet" href="/css/simple-line-icons.css" type="text/css"/>    <link rel="stylesheet" href="/css/font.css" type="text/css"/>    <link rel="stylesheet" href="/css/app.css" type="text/css"/>    <link rel="stylesheet" type="text/css" href="/css/zeroModal.css"/>    <link rel="stylesheet" type="text/css" href="/css/areaStyle.css"/>    <!--[if lt IE 9]>    <script src="js/ie/html5shiv.js"></script>    <script src="js/ie/respond.min.js"></script>    <script src="js/ie/excanvas.js"></script>    <![endif]--></head><body class=""><section class="vbox">    <header class="bg-white-only header header-md navbar navbar-fixed-top-xs">        <div class="navbar-header aside bg-info dk">            <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen,open" data-target="#nav,html">                <i class="icon-list"></i>            </a>            <a href="index.html" class="navbar-brand text-lt">                <i class="icon-earphones"></i>                <img src="/images/logo.png" alt="." class="hide"/>                <span class="hidden-nav-xs m-l-sm">ME+</span>            </a>            <a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".user">                <i class="icon-settings"></i>            </a>        </div>        <ul class="nav navbar-nav hidden-xs">            <li>                <a href="#nav,.navbar-header" data-toggle="class:nav-xs,nav-xs" class="text-muted">                    <i class="fa fa-indent text"></i>                    <i class="fa fa-dedent text-active"></i>                </a>            </li>        </ul>        <form class="navbar-form navbar-left input-s-lg m-t m-l-n-xs hidden-xs" role="search">            <div class="form-group">                <div class="input-group">            <span class="input-group-btn">              <button type="submit" class="btn btn-sm bg-white btn-icon rounded"><i class="fa fa-search"></i></button>            </span>                    <input type="text" class="form-control input-sm no-border rounded"                           placeholder="ME+搜索"/>                </div>            </div>        </form>        <div class="navbar-right ">            <ul class="nav navbar-nav m-n hidden-xs nav-user user">                <li class="hidden-xs">                    <a href="#" class="dropdown-toggle lt" data-toggle="dropdown">                        <i class="icon-bell"></i>                        <span class="badge badge-sm up bg-danger count">2</span>                    </a>                    <section class="dropdown-menu aside-xl animated fadeInUp">                        <section class="panel bg-white">                            <div class="panel-heading b-light bg-light">                                <strong>You have <span class="count">2</span> notifications</strong>                            </div>                            <div class="list-group list-group-alt">                                <a href="#" class="media list-group-item">                    <span class="pull-left thumb-sm">                      <img src="/images/a0.png" alt="..." class="img-circle"/>                    </span>                                    <span class="media-body block m-b-none">                      Use awesome animate.css<br/>                      <small class="text-muted">10 minutes ago</small>                    </span>                                </a>                                <a href="#" class="media list-group-item">                    <span class="media-body block m-b-none">                      1.0 initial released<br/>                      <small class="text-muted">1 hour ago</small>                    </span>                                </a>                            </div>                            <div class="panel-footer text-sm">                                <a href="#" class="pull-right"><i class="fa fa-cog"></i></a>                                <a href="#notes" data-toggle="class:show animated fadeInRight">See all the                                    notifications</a>                            </div>                        </section>                    </section>                </li>                <li class="dropdown">                    <a href="#" class="dropdown-toggle bg clear" data-toggle="dropdown">              <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">                <img src="/images/a0.png" th:attr="src=${session.user.getAvatar()}" alt="..."/>              </span>                        <span th:text="${session.user.getNickName()}"></span><b class="caret"></b>                    </a>                    <ul class="dropdown-menu animated fadeInRight">                        <li>                            <span class="arrow top"></span>                            <a href="#">Settings</a>                        </li>                        <li>                            <a href="#">Profile</a>                        </li>                        <li>                            <a href="#">                                <span class="badge bg-danger pull-right">3</span>                                Notifications                            </a>                        </li>                        <li>                            <a href="">Help</a>                        </li>                        <li class="divider"></li>                        <li>                            <a href="/html/logout.html" data-toggle="ajaxModal">Logout</a>                        </li>                    </ul>                </li>            </ul>        </div>    </header>    <section>        <section class="hbox stretch">            <aside class="bg-black dk aside hidden-print" id="nav">                <section class="vbox">                    <section class="w-f-md scrollable">                        <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0"                             data-size="10px" data-railOpacity="0.2">                            <!-- nav -->                            <nav class="nav-primary hidden-xs">                                <ul class="nav" data-ride="collapse">                                    <li class="active">                                        <a href="#" class="auto"><span class="pull-right text-muted"><i                                                class="fa fa-angle-left text"></i><i                                                class="fa fa-angle-down text-active"></i></span><i                                                class="icon-grid icon"></i><span>平台后台1.0</span> </a>                                        <ul class="nav dk text-sm">                                            <li><a href="/html/platform/supplierList.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>供应商管理</span></a></li>                                            <li><a href="/html/platform/order.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>预约－租借管理</span></a></li>                                            <li><a href="/html/platform/product.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>产品资源管理</span></a></li>                                            <li><a href="/html/platform/users.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>用户资源管理</span></a></li>                                            <li><a href="/html/platform/companylist.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>合作企业</span></a></li>                                        </ul>                                    </li>                                </ul>                            </nav>                        </div>                    </section>                </section>            </aside>            <section id="content">                <section class="vbox">                    <section class="scrollable padder">                        <div class="m-b-md">                            <h3 class="m-b-none"></h3>                        </div>                        <section class="panel panel-default">                            <header class="panel-heading">                                <a href="#" class="btn btn-info"><i class="fa fa-plus"></i>&nbsp;&nbsp;&nbsp;产品信息</a>                            </header>                            <div class="row">                                <div class="col-sm-12">                                    <div class="panel panel-default col-sm-12">                                        <div class="panel-heading col-sm-12">                                            <ul class="nav nav-tabs font-bold">                                                <li class="active"><a id="tab_head_1" data-toggle="tab">基本信息</a></li>                                                <li class=""><a id="tab_head_2" data-toggle="tab">房源信息</a></li>                                                <li class=""><a id="tab_head_3" data-toggle="tab">个人福利</a></li>                                                <li class=""><a id="tab_head_4" data-toggle="tab">企业福利</a></li>                                                <li class=""><a id="tab_head_5" data-toggle="tab">基础设施</a></li>                                                <li class=""><a id="tab_head_6" data-toggle="tab">用户评论</a></li>                                            </ul>                                        </div>                                        <br/>                                        <br/>                                        <div class="panel-body" id="step1">                                            <div class="form-horizontal" id="step1_form">                                                <input type="hidden" name="productId"                                                       id="productId">                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <label class="col-sm-2 control-label">产品名称</label>                                                    <div class="m-r col-sm-3">                                                        <input class="form-control" name="productName"                                                               id="productName"/>                                                    </div>                                                </div>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <label class="col-sm-2 control-label">产品描述</label>                                                    <div class="m-r col-sm-3">                                                        <textarea rows="4" cols="20" class="form-control"                                                                  id="productDetail" name="productDetail">  </textarea>                                                    </div>                                                </div>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <label class="col-sm-2 control-label">产品图片</label>                                                </div>                                                <div id="productDetailPicDiv">                                                </div>                                                <div class="form-group">                                                    <label class="col-sm-2 control-label"></label>                                                    <div class="m-r col-sm-2">                                                        <a class="btn btn-info" href="javascript:void(0)" id="newPic"><i                                                                class="fa fa-plus"></i>&nbsp;&nbsp;&nbsp;新增详情图片</a>                                                    </div>                                                </div>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <label class="col-sm-2 control-label" for="address">产品所在区域</label>                                                    <div class="m-r col-sm-3">                                                        <input class="area_input" id="areaName"/>                                                        <p class="form-control-static" id="areaId"                                                           style="display: none"></p>                                                    </div>                                                </div>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <label class="col-sm-2 control-label" for="address">产品详细地址</label>                                                    <div class="m-r col-sm-3">                                                        <textarea rows="4" cols="20" class="form-control" id="address"                                                                  name="address">                                                        </textarea>                                                    </div>                                                </div>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <label class="col-sm-2 control-label">产品位置</label>                                                    <div class="m-r col-sm-3">                                                        <input name="position" class="form-control"                                                               id="position"/>                                                    </div>                                                </div>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <label class="col-sm-2 control-label">产品排序值</label>                                                    <div class="m-r col-sm-1">                                                        <input class="form-control" id="productSort"                                                               name="productSort" value="0"/>                                                    </div>                                                </div>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <label class="col-sm-2 control-label">产品激活状态</label>                                                    <div class="m-r col-sm-1">                                                        <label class="switch" id="product_active_label">                                                        </label>                                                    </div>                                                </div>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <label class="col-sm-2 control-label">产品守则</label>                                                    <div class="btn-group m-r col-sm-3">                                                        <input class="form-control" id="netRulesUrl" name="netRulesUrl"                                                               value=""/>                                                    </div>                                                    <div class="btn-group m-r">                                                        <button class="btn btn-default" id="btn_netRulesUrl">                                                            <span>守则预览</span></button>                                                    </div>                                                    <div class="btn-group m-r">                                                        <button class="btn btn-default"><span>重新上传</span></button>                                                    </div>                                                </div>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <div class="col-sm-4 col-sm-offset-2">                                                        <button type="reset" class="btn btn-default">重置</button>                                                        <button type="button" class="btn btn-primary" id="btn_submit">                                                            保存                                                        </button>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="panel-body" id="step2"></div>                                        <div class="panel-body" id="step3">                                            <div class="line line-dashed b-b line-lg pull-in"></div>                                            <br>                                            <div id="company_welfare">                                                <div class="row" id="welfaresdpZNz">                                                    <div class="col-sm-5">                                                        <label class="col-sm-2 control-label">福利公告</label>                                                        <textarea class="form-control parsley-validated" rows="6"                                                                  data-minwords="6" name="notice"                                                                  id="welfareNotice"></textarea>                                                    </div>                                                    <div class="col-sm-6 form-horizontal">                                                        <label class="col-sm-2 control-label"></label><br>                                                        <div class="form-group"><label class="col-sm-2 control-label">房租减免</label>                                                            <div class="col-sm-10">                                                                <div class="input-group m-b col-sm-2">                                                                    <input class="form-control" name="remitPercent"                                                                           id="remitPercent"                                                                           value="0"/><span                                                                        class="input-group-addon">%</span>                                                                </div>                                                            </div>                                                        </div>                                                        <div class="form-group form-inline">                                                            <label class="col-sm-2 control-label">支付模式</label>                                                            <div class="col-sm-10">                                                                <div class="input-group m-b col-sm-3">                                                                    <span class="input-group-addon">压</span>                                                                    <input type="text" class="form-control"                                                                           name="mortagageNum" value="0"                                                                           id="mortagageNum"/>                                                                    <span class="input-group-addon">月</span></div>                                                                <div class="input-group m-b col-sm-3">                                                                    <span class="input-group-addon">付</span>                                                                    <input type="text" class="form-control"                                                                           name="payMentNum" value="0" id="payMentNum"/>                                                                    <span class="input-group-addon">月</span></div>                                                            </div>                                                        </div>                                                        <div class="form-group">                                                            <div class="col-sm-4 col-sm-offset-2">                                                                <button class="btn btn-danger btn-s-md btn-rounded"                                                                        onclick="deleteCompanyWelfare()">删除                                                                </button>                                                                <button class="btn btn-primary btn-s-md btn-rounded"                                                                        onclick="saveCompanyWelfare()">保存                                                                </button>                                                            </div>                                                        </div>                                                    </div>                                                </div>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                            </div>                                        </div>                                        <div class="panel-body" id="step4">                                            <div class="form-group">                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                                <div class="form-group">                                                    <a class="btn btn-info col-sm-1 control-label" href="#"><i                                                            class="fa fa-plus"></i>&nbsp;&nbsp;&nbsp;添加企业福利</a>                                                </div>                                                <br/>                                                <br/>                                                <div class="line line-dashed b-b line-lg pull-in"></div>                                            </div>                                            <div class="table-responsive">                                                <table class="table table-striped b-t b-light">                                                    <thead>                                                    <tr style="height: 40px;">                                                        <th class="text-center" style="vertical-align: middle">企业名称</th>                                                        <th class="text-center" style="vertical-align: middle">公告</th>                                                        <th class="text-center" style="vertical-align: middle">房租减免%                                                        </th>                                                        <th class="text-center" style="vertical-align: middle">首次支付月数                                                        </th>                                                        <th class="text-center" style="vertical-align: middle">首次押金月数                                                        </th>                                                        <th class="text-center" style="vertical-align: middle">创建时间</th>                                                    </tr>                                                    </thead>                                                    <tbody id="company_welfare_table_body">                                                    </tbody>                                                </table>                                            </div>                                        </div>                                        <div class="panel-body" id="step5"></div>                                        <div class="panel-body" id="step6"></div>                                    </div>                                </div>                            </div>                            </div>                        </section>                        <div class="m-b-md">                            <div class="text-center padder clearfix">                                <p>                                    <small>上海寓伽信息科技有限公司&nbsp;&copy;2017</small>                                </p>                            </div>                        </div>                        <div class="area_content" id="areaNameAreaContent">                            <div class="area_menu">                                <ul>                                    <li class="isClick">省份</li>                                    <li>城市</li>                                    <li>县区</li>                                </ul>                            </div>                            <div class="area_data_content">                                <div class="area_data data_province isBlock">                                    <div class="data_Part part_one"><a class="part_type">A-G</a>                                        <ul>                                            <li><a>北京<input value="11" style="display:none"></a></li>                                            <li><a>安徽省<input value="34" style="display:none"></a></li>                                            <li><a>福建省<input value="35" style="display:none"></a></li>                                            <li><a>广东省<input value="44" style="display:none"></a></li>                                            <li><a>广西<input value="45" style="display:none"></a></li>                                            <li><a>贵州省<input value="52" style="display:none"></a></li>                                            <li><a>甘肃省<input value="62" style="display:none"></a></li>                                            <li><a>澳门<input value="82" style="display:none"></a></li>                                        </ul>                                    </div>                                    <div class="data_Part part_two"><a class="part_type">H-N</a>                                        <ul>                                            <li><a>河北省<input value="13" style="display:none"></a></li>                                            <li><a>内蒙古<input value="15" style="display:none"></a></li>                                            <li><a>辽宁省<input value="21" style="display:none"></a></li>                                            <li><a>吉林省<input value="22" style="display:none"></a></li>                                            <li><a>黑龙江省<input value="23" style="display:none"></a></li>                                            <li><a>江苏省<input value="32" style="display:none"></a></li>                                            <li><a>江西省<input value="36" style="display:none"></a></li>                                            <li><a>河南省<input value="41" style="display:none"></a></li>                                            <li><a>湖北省<input value="42" style="display:none"></a></li>                                            <li><a>湖南省<input value="43" style="display:none"></a></li>                                            <li><a>海南省<input value="46" style="display:none"></a></li>                                            <li><a>宁夏<input value="64" style="display:none"></a></li>                                        </ul>                                    </div>                                    <div class="data_Part part_three"><a class="part_type">O-U</a>                                        <ul>                                            <li><a>天津市<input value="12" style="display:none"></a></li>                                            <li><a>山西省<input value="14" style="display:none"></a></li>                                            <li><a>上海市<input value="31" style="display:none"></a></li>                                            <li><a>山东省<input value="37" style="display:none"></a></li>                                            <li><a>四川省<input value="51" style="display:none"></a></li>                                            <li><a>陕西省<input value="61" style="display:none"></a></li>                                            <li><a>青海<input value="63" style="display:none"></a></li>                                            <li><a>台湾<input value="71" style="display:none"></a></li>                                        </ul>                                    </div>                                    <div class="data_Part part_four"><a class="part_type part_four">V-Z</a>                                        <ul>                                            <li><a>浙江省<input value="33" style="display:none"></a></li>                                            <li><a>重庆市<input value="50" style="display:none"></a></li>                                            <li><a>云南省<input value="53" style="display:none"></a></li>                                            <li><a>西藏<input value="54" style="display:none"></a></li>                                            <li><a>新疆<input value="65" style="display:none"></a></li>                                            <li><a>香港<input value="81" style="display:none"></a></li>                                        </ul>                                    </div>                                </div>                                <div class="area_data data_region">                                    <div class="data_Part part_one"><a class="part_type">A-G</a>                                        <ul></ul>                                    </div>                                    <div class="data_Part part_two"><a class="part_type">H-N</a>                                        <ul></ul>                                    </div>                                    <div class="data_Part part_three"><a class="part_type">O-U</a>                                        <ul></ul>                                    </div>                                    <div class="data_Part part_four"><a class="part_type part_four">V-Z</a>                                        <ul></ul>                                    </div>                                </div>                                <div class="area_data data_city">                                    <div class="data_Part part_one"><a class="part_type">A-G</a>                                        <ul></ul>                                    </div>                                    <div class="data_Part part_two"><a class="part_type">H-N</a>                                        <ul></ul>                                    </div>                                    <div class="data_Part part_three"><a class="part_type">O-U</a>                                        <ul></ul>                                    </div>                                    <div class="data_Part part_four"><a class="part_type part_four">V-Z</a>                                        <ul></ul>                                    </div>                                </div>                            </div>                        </div>                    </section>                </section>                <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen,open"                   data-target="#nav,html"></a>            </section>        </section>    </section></section><script src="/js/jquery.min.js"></script><script type="text/javascript"        src="http://resource.mjiahome.com/mj/static/oss_js/lib/plupload-2.1.2/js/plupload.full.min.js"></script><script src="/js/uploadV2.js"></script><script src="/js/zeroModal.min.js"></script><script src="/js/area/charfirstPinyin.js"></script><script src="/js/area/area.js"></script><script src="http://resource.mjiahome.com/mj/static/js/area.js"></script><script type="application/javascript">    String.prototype.startWith = function (str) {        var reg = new RegExp("^" + str);        return reg.test(this);    };    var picSize = 0;    var clickIndex = -1;//默认表示新增    var productId = GetQueryParam('code');    function fileUpload(file) {        console.log("-->" + picSize + ":" + clickIndex + ":" + file);        if (-1 == clickIndex) {            var txt = '<div class="form-group" name="detail_pic_group"><label class="col-sm-2 control-label"></label><div class="m-r col-sm-2">' +                '<img src="' + file + '" name="ImgDetailPic" class="r r-2x" width="100%" height="100px" id="ImgDetailPic' + picSize + '"  onclick="clickUpload(' + picSize + ')"></div><div class="m-r col-sm-3">' +                '<br><div class="form-group"><button class="btn btn-info"id="btnDetailPic' + picSize + '" ><i class="fa fa-upload"></i><span>重新上传</span></button><button class="btn btn-danger" onclick="removePic(' + picSize + ')"><i class="fa fa-trash-o"></i><span>删除图片</span></button></div>' +                '<div class="radio i-checks"><label><input type="radio" name="detailpic" value="' + picSize + '"><i></i>设置为列表展示图</label></div></div></div>';            $('#productDetailPicDiv').append(txt);            picSize++;        } else {            $('#ImgDetailPic' + clickIndex).attr('src', file);        }        clickIndex = -1;    }    $(function () {        bindUpload('newPic', fileUpload);        refreshData();        step1();        $('#areaName').areaSelector(areaData, 'areaId');        $("#choose_file_label").bind("click", function () {            $("filestyle-0").trigger("click");        });        $("#tab_head_1").click(function () {            step1();        });        $("#tab_head_2").click(function () {            step2();        });        $("#tab_head_3").click(function () {            step3();        });        $("#tab_head_4").click(function () {            step4();        });        $("#tab_head_5").click(function () {            step5();        });        $("#tab_head_6").click(function () {            step6();        });        $("#companyActive").click(function () {            if ('激活' == $("#companyActive").val()) {                $("#companyActive").val('不激活');            } else {                $("#companyActive").val('激活');            }        });        $("#btn_netRulesUrl").click(function () {            zeroModal.show({                title: '房屋守则',                iframe: true,                url: $("#netRulesUrl").val(),                width: '40%',                height: '60%',                esc: true,                cancel: true            });        });        $("#btn_submit").click(function () {            var listPicPosition = $("input[name='detailpic']").filter(":checked").val()            var imageDetailList = eval('[]');            $("img[name='ImgDetailPic']").each(function (index, element) {                imageDetailList.push($(this).attr('src'));            });            var areaId = $("#areaId").html();            var data = {                "productId": $("#productId").val(),                "productName": $("#productName").val(),                "productDetail": $("#productDetail").html(),                "address": $("#address").val(),                "areaId": areaId,                "areaName": $('#areaName').val(),                "position": $("#position").val(),                "areaProvince": areaId.substring(0, 2),                "areaRegion": areaId.substring(2, 4),                "areaCity": areaId.substring(4, 6),                "netRulesUrl": $("#netRulesUrl").val(),                "productSort": $("#productSort").val(),                "productActive": $("#productActive").is(':checked'),                "listpic": imageDetailList[listPicPosition],                "detailpic": '[' + imageDetailList.toString() + ']'            };            var op = GetQueryParam('op');            if ('op' == null) {                alert('操作未知！');                return;            }            if ('update' == op) {                $.ajax({                    type: "POST",                    async: true,                    url: "/api/product/update",                    contentType: "application/json",                    data: JSON.stringify(data),                    dataType: "json",                    success: function (ret) {                        if (0 == ret['code']) {                            alert("修改成功！");                        } else {                            alert(ret['msg']);                        }                    },                    error: function (message) {                        console.info(message);                    }                });            } else if ('add' == op) {                $.ajax({                    type: "POST",                    async: true,                    url: "/api/company/add",                    contentType: "application/json",                    data: JSON.stringify(data),                    dataType: "json",                    success: function (ret) {                        if (0 == ret['code']) {                            if ('update' != GetQueryParam('op')) {                                window.location.href = '/html/platform/productInfo.html?op=update&code=' + ret['result'];                            }                            alert("创建成功！");                        } else {                            alert(ret['msg']);                        }                        console.info(ret);                    },                    error: function (message) {                        console.info(message);                    }                });            } else {                alert('操作未知！');                return;            }        });    });    function refreshData() {        var code = GetQueryParam('code');        var data = {};        data.productId = code;        $.ajax({            type: "POST",            async: true,            url: "/api/product/list",            contentType: "application/json",            data: JSON.stringify(data),            dataType: "json",            success: function (ret) {                if (0 == ret['code'] && ret['result'].length > 0) {                    fillData(ret['result'][0]);                }            },            error: function (message) {            }        });    }    function clickUpload(index) {        clickIndex = index;        $('#newPic').click();        console.log(picSize + ":" + clickIndex);    }    function fillData(data) {        $('#productId').val(data['productId']);        $('#productName').val(data['productName']);        $('#productDetail').html(data['productDetail']);        $('#productDetailPicDiv').empty();        var areaCode = data['areaId'] + '';        $('#areaName').val(data['areaName']);        $('#areaId').html(data['areaId']);        $('#address').val(data['address']);        $('#position').val(data['position']);        $('#netRulesUrl').val(data['netRulesUrl']);        $('#productSort').val(data['productSort']);        var productActive = data['productActive'];        if (productActive) {            $('#product_active_label').html('<input type="checkbox" id="productActive" checked/> <span></span>');        } else {            $('#product_active_label').html('<input type="checkbox" id="productActive" /> <span></span>');        }        var listPic = data['listpic'];        var arr = data['detailpic'];        var detailPic = $('#productDetailPicDiv');        for (var index = 0; index < arr.length; index++) {            if ((null == listPic || undefined == listPic || '' == listPic) && index == 0) {                detailPic.append('<div class="form-group" name="detail_pic_group"><label class="col-sm-2 control-label"></label><div class="m-r col-sm-2">' +                    '<img src="' + arr[index] + '" name="ImgDetailPic" class="r r-2x" width="100%" height="100px" id="ImgDetailPic' + picSize + '"  onclick="clickUpload(' + picSize + ')"></div><div class="m-r col-sm-3">' +                    '<br><div class="form-group"><button class="btn btn-info"id="btnDetailPic' + picSize + '" ><i class="fa fa-upload"></i><span>重新上传</span></button><button class="btn btn-danger" onclick="removePic(' + picSize + ')"><i class="fa fa-trash-o"></i><span>删除图片</span></button></div>' +                    '<div class="radio i-checks"><label><input type="radio" name="detailpic" value="' + index + '"><i></i>设置为列表展示图</label></div></div></div>');            } else {                if (arr[index] == listPic) {                    detailPic.append('<div class="form-group" name="detail_pic_group"><label class="col-sm-2 control-label"></label><div class="m-r col-sm-2">' +                        '<img src="' + arr[index] + '" name="ImgDetailPic" class="r r-2x" width="100%" height="100px" id="ImgDetailPic' + picSize + '"  onclick="clickUpload(' + picSize + ')"></div><div class="m-r col-sm-3">' +                        '<br><div class="form-group"><button class="btn btn-info"id="btnDetailPic' + picSize + '" ><i class="fa fa-upload"></i><span>重新上传</span></button><button class="btn btn-danger" onclick="removePic(' + picSize + ')"><i class="fa fa-trash-o"></i><span>删除图片</span></button></div>' +                        '<div class="radio i-checks"><label><input type="radio" name="detailpic" value="' + index + '" checked><i></i>设置为列表展示图</label></div></div></div>');                } else {                    detailPic.append('<div class="form-group" name="detail_pic_group"><label class="col-sm-2 control-label"></label><div class="m-r col-sm-2">' +                        '<img src="' + arr[index] + '" name="ImgDetailPic" class="r r-2x" width="100%" height="100px" id="ImgDetailPic' + picSize + '"  onclick="clickUpload(' + picSize + ')"></div><div class="m-r col-sm-3">' +                        '<br><div class="form-group"><button class="btn btn-info"id="btnDetailPic' + picSize + '" ><i class="fa fa-upload"></i><span>重新上传</span></button><button class="btn btn-danger" onclick="removePic(' + picSize + ')"><i class="fa fa-trash-o"></i><span>删除图片</span></button></div>' +                        '<div class="radio i-checks"><label><input type="radio" name="detailpic" value="' + index + '"><i></i>设置为列表展示图</label></div></div></div>');                }            }            bindUpload('btnDetailPic' + picSize, function (file) {                $('#ImgDetailPic' + picSize).attr('src', file);            });            picSize += 1;        }        //填充个人福利        if (data['hasPersonal']) {            var personalWelfare = JSON.parse(data['personalWelfare']);            console.log(personalWelfare);            $("#remitPercent").val(personalWelfare['remitPercent']);            $("#payMentNum").val(personalWelfare['payMentNum']);            $("#mortagageNum").val(personalWelfare['mortagageNum']);            $("#welfareNotice").html(personalWelfare['notice']);        }    }    function removePic(index) {        $("div[name='detail_pic_group']")[index].remove();    }    function deleteCompanyWelfare() {        var data = {};        $.ajax({            type: "POST",            async: true,            url: "/api/product/remove_welfare?productId=" + GetQueryParam('code'),            contentType: "application/json",            data: JSON.stringify(data),            dataType: "json",            success: function (ret) {                if (0 == ret['code']) {                    refreshData();                    alert("删除成功！");                } else {                    alert(ret['msg']);                }            },            error: function (message) {            }        });    }    function saveCompanyWelfare(welfareId) {        var notice = {};        $('#welfaresdpZNz input').each(function (item, val) {            notice[$(this).attr("name")] = $(this).val()        });        $('#welfaresdpZNz textarea').each(function (item, val) {            notice[$(this).attr("name")] = $(this).val()        });        if (notice.remitPercent > 100 || notice.remitPercent < 0) {            alert("折扣比例的范围（0~100）");            return;        }        if (notice.payMentNum < 0) {            alert("首次支付的月数不能小于0");            return;        }        if (notice.mortagageNum < 0) {            alert("首次支付的押金月数不能小于0");            return;        }        $.ajax({            type: "POST",            async: true,            url: "/api/product/update_welfare?productId=" + GetQueryParam('code'),            contentType: "application/json",            data: JSON.stringify(notice),            dataType: "json",            success: function (ret) {                if (0 == ret['code']) {                    refreshData();                    alert("修改成功！");                } else {                    alert(ret['msg']);                }            },            error: function (message) {            }        });    }    function GetQueryParam(name) {        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");        var r = window.location.search.substr(1).match(reg);        if (r != null) return unescape(r[2]);        return null;    }    function step1() {        $("#step1").css("display", "block");        $("#step2").css("display", "none");        $("#step3").css("display", "none");        $("#step4").css("display", "none");        $("#step5").css("display", "none");        $("#step6").css("display", "none");    }    function step2() {        if (null == productId || '' == productId || undefined == productId) {            alert("请先保存产品信息！");        }        $("#step1").css("display", "none");        $("#step2").css("display", "block");        $("#step3").css("display", "none");        $("#step4").css("display", "none");        $("#step5").css("display", "none");        $("#step6").css("display", "none");    }    function step3() {        if (null == productId || '' == productId || undefined == productId) {            alert("请先保存产品信息！");        }        $("#step1").css("display", "none");        $("#step2").css("display", "none");        $("#step3").css("display", "block");        $("#step4").css("display", "none");        $("#step5").css("display", "none");        $("#step6").css("display", "none");    }    function step4() {        if (null == productId || '' == productId || undefined == productId) {            alert("请先保存产品信息！");        }        $("#step1").css("display", "none");        $("#step2").css("display", "none");        $("#step3").css("display", "none");        $("#step4").css("display", "block");        $("#step5").css("display", "none");        $("#step6").css("display", "none");        $.ajax({            type: "POST",            async: true,            url: "/api/product/list_company_welfare?productId=" + GetQueryParam('code'),            contentType: "application/json",            dataType: "json",            success: function (ret) {                if (0 == ret['code']) {                    refreshCompanyWelfare(ret['result']);                } else {                    alert(ret['msg']);                }            },            error: function (message) {            }        });    }    function refreshCompanyWelfare(data) {        console.log(data);        if (data.length > 0) {            $("#company_welfare_table_body").empty();            for (var index = 0; index < data.length; index++) {                var content = JSON.parse(data[index]['content']);                console.log(content);                $("#company_welfare_table_body").append(                    '<tr style="height: 40px;">' +                    '<th class="text-center" style="vertical-align: middle">' + data[index]['companyName'] + '</th>' +                    '<th class="text-center" style="vertical-align: middle">查看</th>' +                    '<th class="text-center" style="vertical-align: middle">' + content['remitPercent'] +                    '</th>' +                    '<th class="text-center" style="vertical-align: middle">' + content['payMentNum'] +                    '</th>' +                    '<th class="text-center" style="vertical-align: middle">' + content['mortagageNum'] +                    '</th>' +                    '<th class="text-center" style="vertical-align: middle">' + data[index]['createTime'] + '</th>' +                    '</tr>');            }        }    }    function step5() {        if (null == productId || '' == productId || undefined == productId) {            alert("请先保存产品信息！");        }        $("#step1").css("display", "none");        $("#step2").css("display", "none");        $("#step3").css("display", "none");        $("#step4").css("display", "none");        $("#step5").css("display", "block");        $("#step6").css("display", "none");    }    function step6() {        if (null == productId || '' == productId || undefined == productId) {            alert("请先保存产品信息！");        }        $("#step1").css("display", "none");        $("#step2").css("display", "none");        $("#step3").css("display", "none");        $("#step4").css("display", "none");        $("#step5").css("display", "none");        $("#step6").css("display", "block");    }</script><!-- Bootstrap --><script src="/js/bootstrap.js"></script><!-- App --><script src="/js/app.js"></script><script src="/js/slimscroll/jquery.slimscroll.min.js"></script><script src="/js/app.plugin.js"></script></body></html>