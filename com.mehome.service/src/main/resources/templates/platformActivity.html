<!DOCTYPE html><html lang="en" class="app" xmlns:th="http://www.thymeleaf.org"><head>    <meta charset="utf-8"/>    <title>ME+企业用户管理</title>    <meta name="description"          content="app, web app, responsive, admin dashboard, admin, flat, flat ui, ui kit, off screen nav"/>    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>    <link rel="stylesheet" href="/css/bootstrap.css" type="text/css"/>    <link rel="stylesheet" href="/css/animate.css" type="text/css"/>    <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css"/>    <link rel="stylesheet" href="/css/simple-line-icons.css" type="text/css"/>    <link rel="stylesheet" href="/css/font.css" type="text/css"/>    <link rel="stylesheet" href="/css/app.css" type="text/css"/>    <link rel="stylesheet" type="text/css" href="/css/zeroModal.css"/>    <!--[if lt IE 9]>    <script src="js/ie/html5shiv.js"></script>    <script src="js/ie/respond.min.js"></script>    <script src="js/ie/excanvas.js"></script>    <![endif]--></head><body class=""><section class="vbox">    <header class="bg-white-only header header-md navbar navbar-fixed-top-xs">        <div class="navbar-header aside bg-info dk">            <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen,open" data-target="#nav,html">                <i class="icon-list"></i>            </a>            <a href="index.html" class="navbar-brand text-lt">                <i class="icon-earphones"></i>                <img src="/images/logo.png" alt="." class="hide"/>                <span class="hidden-nav-xs m-l-sm">ME+</span>            </a>            <a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".user">                <i class="icon-settings"></i>            </a>        </div>        <ul class="nav navbar-nav hidden-xs">            <li>                <a href="#nav,.navbar-header" data-toggle="class:nav-xs,nav-xs" class="text-muted">                    <i class="fa fa-indent text"></i>                    <i class="fa fa-dedent text-active"></i>                </a>            </li>        </ul>        <form class="navbar-form navbar-left input-s-lg m-t m-l-n-xs hidden-xs" role="search">            <div class="form-group" style="display: none">                <div class="input-group">            <span class="input-group-btn">              <button type="submit" class="btn btn-sm bg-white btn-icon rounded"><i class="fa fa-search"></i></button>            </span>                    <input type="text" class="form-control input-sm no-border rounded"                           placeholder="ME+搜索"/>                </div>            </div>        </form>        <div class="navbar-right ">            <ul class="nav navbar-nav m-n hidden-xs nav-user user">                <li class="hidden-xs" style="display: none">                    <a href="#" class="dropdown-toggle lt" data-toggle="dropdown">                        <i class="icon-bell"></i>                        <span class="badge badge-sm up bg-danger count">2</span>                    </a>                    <section class="dropdown-menu aside-xl animated fadeInUp">                        <section class="panel bg-white">                            <div class="panel-heading b-light bg-light">                                <strong>You have <span class="count">2</span> notifications</strong>                            </div>                            <div class="list-group list-group-alt">                                <a href="#" class="media list-group-item">                    <span class="pull-left thumb-sm">                      <img src="/images/a0.png" alt="..." class="img-circle"/>                    </span>                                    <span class="media-body block m-b-none">                      Use awesome animate.css<br/>                      <small class="text-muted">10 minutes ago</small>                    </span>                                </a>                                <a href="#" class="media list-group-item">                    <span class="media-body block m-b-none">                      1.0 initial released<br/>                      <small class="text-muted">1 hour ago</small>                    </span>                                </a>                            </div>                            <div class="panel-footer text-sm">                                <a href="#" class="pull-right"><i class="fa fa-cog"></i></a>                                <a href="#notes" data-toggle="class:show animated fadeInRight">See all the                                    notifications</a>                            </div>                        </section>                    </section>                </li>                <li class="dropdown">                    <a href="#" class="dropdown-toggle bg clear" data-toggle="dropdown">                          <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">                            <img src="/images/a0.png" th:attr="src=${session.user.getAvatar()}" alt="..."/>                          </span>                        <span th:text="${session.user.getNickName()}"></span><b class="caret"></b>                    </a>                    <ul class="dropdown-menu animated fadeInRight">                        <li>                            <a href="/html/logout.html">Logout</a>                        </li>                    </ul>                </li>            </ul>        </div>    </header>    <section>        <section class="hbox stretch">            <aside class="bg-black dk aside hidden-print" id="nav">                <section class="vbox">                    <section class="w-f-md scrollable">                        <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0"                             data-size="10px" data-railOpacity="0.2">                            <!-- nav -->                            <nav class="nav-primary hidden-xs">                                <ul class="nav" data-ride="collapse">                                    <li class="active">                                        <a href="#" class="auto"><span class="pull-right text-muted"><i                                                class="fa fa-angle-left text"></i><i                                                class="fa fa-angle-down text-active"></i></span><i                                                class="icon-grid icon"></i><span>平台后台1.0</span> </a>                                        <ul class="nav dk text-sm">                                            <li><a href="/html/platform/supplierList.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>供应商管理</span></a></li>                                            <li><a href="/html/platform/order.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>预约－租借管理</span></a></li>                                            <li><a href="/html/platform/product.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>产品资源管理</span></a></li>                                            <li><a href="/html/platform/users.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>用户资源管理</span></a></li>                                            <li><a href="/html/platform/companylist.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>合作企业</span></a></li>                                            <li><a href="/html/platform/activity.html" class="auto"><i                                                    class="fa fa-angle-right text-xs"></i><span>资讯管理</span></a></li>                                        </ul>                                    </li>                                </ul>                            </nav>                        </div>                    </section>                </section>            </aside>            <section id="content">                <section class="vbox">                    <section class="scrollable padder">                        <div class="m-b-md">                            <h3 class="m-b-none"></h3>                        </div>                        <section class="panel panel-default">                            <header class="panel-heading">                                <h4>资讯管理                                </h4>                            </header>                            <div class="row wrapper">                                                                                                                <div class="col-sm-1 m-b-xs">                                    <div class="input-group">                                        <input type="text" class="form-control" placeholder="标题" id="productName"/>                                    </div>                                </div>                                                                <div class="btn-group col-sm-1 m-b-xs">                                    <button id="orderStatus" class="btn btn-default" value="-1">全部类型</button>                                    <button class="btn btn-default dropdown-toggle"                                            data-toggle="dropdown">                                        <span class="caret"></span></button>                                    <ul class="dropdown-menu">                                        <li><a onclick="order_status(0,'一般资讯')" href="javascript:void(0)">一般资讯</a>                                        </li>                                        <li><a onclick="order_status(1,'活动')"                                               href="javascript:void(0)">活动</a></li>                                        <li><a onclick="order_status(0,'专题')"                                               href="javascript:void(0)">专题</a>                                        </li>                                    </ul>                                </div>                                                                                       <div class="col-sm-0 btn-group">                                    <button class="btn btn-primary btn-s-md"                                            id="btn_search">查询                                    </button>                                </div>                                <div class="col-sm-0 btn-group">                                    <a class="btn btn-info" href="javascript:void(0)" id="btn_new" onclick="javascript:info(-1)"><i class="fa fa-plus"></i>&nbsp;&nbsp;&nbsp;新增资讯</a>                                </div>                            </div>                            <div class="table-responsive">                                <table class="table table-striped b-t b-light">                                    <thead>                                    <tr style="height: 40px;">                                        <th class="text-center" style="vertical-align: middle">标题</th>                                        <th class="text-center" style="vertical-align: middle">类型</th>                                        <th class="text-center" style="vertical-align: middle">是否应用于首页banner</th>                                        <th class="text-center" style="vertical-align: middle">发布时间</th>                                        <th class="text-center" style="vertical-align: middle">操作</th>                                    </tr>                                    </thead>                                    <tbody id="table_body">                                    </tbody>                                </table>                            </div>                            <footer class="panel-footer">                                <div class="row">                                    <div class="col-sm-4 hidden-xs">                                    </div>                                    <div class="col-sm-4 text-center">                                    </div>                                    <div class="col-sm-4 text-right text-center-xs">                                        <ul id="page_index" class="pagination pagination-sm m-t-none m-b-none">                                        </ul>                                    </div>                                </div>                            </footer>                        </section>                        <div class="m-b-md">                            <div class="text-center padder clearfix">                                <p>                                    <small>上海寓伽信息科技有限公司&nbsp;&copy;2017</small>                                </p>                            </div>                        </div>                    </section>                </section>                <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen,open"                   data-target="#nav,html"></a>            </section>        </section>    </section></section><script src="/js/jquery.min.js"></script><script type="text/javascript"        src="http://resource.mjiahome.com/mj/static/oss_js/lib/plupload-2.1.2/js/plupload.full.min.js"></script><script src="/js/uploadV2.js"></script><script src="/js/zeroModal.min.js"></script><script type="application/javascript">    var pageSize = 10;    var pageNow = 1;    var total = 0;    var pageNum = 1;    var dataBuff = [];    $(function () {    	requestTopicList();        $("#btn_search").click(function () {            pageNow = 1;            requestTopicList();        });        /* $('#btn_new').click(function () {            window.location.href='/html/platform/productInfo.html?op=add';		}); */    });    function calPageNum() {        if (total == 0) {            pageNum = 1;        }        if (total % pageSize == 0) {            pageNum = total / pageSize;        } else {            pageNum = parseInt(total / pageSize) + 1;        }        $('#page_index').empty();        var pre = '<div class="btn-group m-b-sm">' +            '<button type="button" onclick="pagePrevious()" class="btn btn-default"><i class="fa fa-arrow-left"></i></button>';        var center = '';        for (var index = 1; index <= pageNum; index++) {            if (index == pageNow) {                center += '<button type="button" onclick="pageClear(' + index + ')" class="btn btn-success">' + index + '</button>';            } else {                center += '<button type="button" onclick="pageClear(' + index + ')" class="btn btn-default">' + index + '</button>';            }        }        var follow = '<button type="button" onclick="pageFollowing()" class="btn btn-default"><i class="fa fa-arrow-right"></i></button>' +            '</div>';        $('#page_index').append(pre + center + follow);    }    function pagePrevious() {        pageNow--;        requestTopicList();    }    function pageFollowing() {        pageNow++;        requestTopicList();    }    function pageClear(page) {        pageNow = page;        requestTopicList();    }    function requestTopicList() {        if (pageNow < 1) {            pageNow = 1;        }        if (pageNow > pageNum) {            pageNow = pageNum;        }        var data = {            'pageNow': pageNow,            'pageSize': pageSize        };        $.ajax({            type: "POST",            async: true,            url: "/api/topic/list",            contentType: "application/json",            data: JSON.stringify(data),            dataType: "json",            success: function (ret) {                $("#table_body").empty();                total = ret['totalCount'];                $.each(ret['result'], function (index, val) {                    buildTr(index, val);                });                $("#span_total").html(total);                calPageNum();            },            error: function (message) {            }        });    }    function buildTr(index, item) {    	dataBuff[index] = item;    	var tid = item['tid'];        var subject = item['subject'];        var topicType = item['topicTypeDesc'];        var displayLocation = item['displayLocation'];        var displayDesc="不是";        if(displayLocation=='index'){        	displayDesc="是";        }        var createTime = item['createTime'];        var isActive = item['isActive'];        var operation='';        if(isActive){        	operation='<a class="btn btn-xs btn-success btn-rounded" id="updateTopic" href="/html/platform/activityedit.html?op=update&code=' + tid + '"   onclick="javascript:info(' + index + ')">编辑</a>｜<a class="btn btn-xs btn-success btn-rounded" id="hidden" onclick="hiddenTopic(\'' + tid + '\')">隐藏</a>';        }        else{        	operation='<a class="btn btn-xs btn-success btn-rounded" id="updateTopic" href="/html/platform/activityedit.html?op=update&code=' + tid + '"   onclick="javascript:info(' + index + ')">编辑</a>｜<a class="btn btn-xs btn-success btn-rounded" id="orderCancel" onclick="cancelHidden(\'' + tid + '\')">取消隐藏</a>';	        }        var txt =            '<tr style="height: 60px;">' +            '<td style="vertical-align: middle" class="text-center">' + subject + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + topicType + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + displayDesc + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + createTime + '</td>' +            '<td style="vertical-align: middle" class="text-center">' + operation + '</td></tr>';        $("#table_body").append(txt);    }    var update = false;    var infoData = {};    function info(index) {        if (index == -1) {            var txt =                '<section class="panel panel-default">' +                '<div class="panel-body">' +                '<form class="form-horizontal">' +                '<div class="form-group">' +                '<label class="col-sm-3 control-label">标题</label>' +                '<div class="col-sm-5">' +                '<input type="text" class="form-control rounded" id="subject" >' +                '</div>' +                '</div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group"><label class="col-sm-3 control-label">类型</label><div class="col-sm-5">' +                '<div class="radio i-checks"><label><input type="radio" name="topicType" value="normal" checked><i></i>一般资讯</label></div>' +                '<div class="radio i-checks"><label><input type="radio" name="topicType" value="activity" ><i></i>活动</label></div>' +                '<div class="radio i-checks"><label><input type="radio" name="topicType" value="topic" ><i></i>专题</label></div>' +                '</div></div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group"><label class="col-sm-3 control-label">是否应用于首页banner</label><div class="col-sm-5">' +                '<div class="radio i-checks"><label><input type="radio" name="displayLocation" value="0" checked><i></i>否</label></div>' +                '<div class="radio i-checks"><label><input type="radio" name="displayLocation" value="index" ><i></i>是</label></div>' +                '</div></div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group">' +                '<label class="col-sm-3 control-label">内容</label>' +                '<div class="col-sm-5">' +                '<textarea rows="4" cols="20" class="form-control" id="formatContent" name="formatContent"></textarea>' +                '</div>' +                '</div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group"><label class="col-sm-2 control-label">资讯图片</label></div><div id="productDetailPicDiv"></div>' +                '<div class="form-group"><label class="col-sm-2 control-label"></label><div class="m-r col-sm-2"><a class="btn btn-info" href="javascript:void(0)" id="newPic"><i class="fa fa-plus"></i>&nbsp;&nbsp;&nbsp;新增图片</a></div></div>'+                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group"><label class="col-sm-3 control-label">来源</label><div class="col-sm-5"><input type="text" class="form-control rounded" id="contentFrom" ></div>' +                '</form>' +                '</div>' +                '</section>';//            loadScript("/js/uploadPic.js");            update = false;            infoData = {};        } else {            update = true;            var item = dataBuff[index];            infoData.supplierId = item['supplierId'];            var txt =                '<section class="panel panel-default">' +                '<div class="panel-body">' +                '<form class="form-horizontal">' +                '<div class="form-group">' +                '<label class="col-sm-3 control-label">供应商名称</label>' +                '<div class="col-sm-5">' +                '<input type="text" class="form-control rounded" id="supplierName" value="' + item['supplierName'] + '">' +                '</div>' +                '</div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group">' +                '<label class="col-sm-3 control-label">供应商电话</label>' +                '<div class="col-sm-5">' +                '<input type="text" class="form-control rounded" id="supplierPhone" value="' + item['supplierPhone'] + '">' +                '</div>' +                '</div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group"><label class="col-sm-3 control-label">支付方式</label><div class="col-sm-5">';            if ('alipay' == item['recipientType']) {                txt += '<div class="radio i-checks"><label><input type="radio" name="recipientType" value="alipay" checked><i></i>支付宝</label></div>' +                    '<div class="radio i-checks"><label><input type="radio" name="recipientType" value="wechat" ><i></i>微信支付</label></div>' +                    '<div class="radio i-checks"> <label><input type="radio" name="recipientType" value="creditcard" ><i></i>信用卡支付</label></div>' +                    '<div class="radio i-checks"> <label><input type="radio" name="recipientType" value="cash"> <i></i>现金支付</label></div>';            } else if ('wechat' == item['recipientType']) {                txt += '<div class="radio i-checks"><label><input type="radio" name="recipientType" value="alipay" ><i></i>支付宝</label></div>' +                    '<div class="radio i-checks"><label><input type="radio" name="recipientType" value="wechat" checked><i></i>微信支付</label></div>' +                    '<div class="radio i-checks"> <label><input type="radio" name="recipientType" value="creditcard" ><i></i>信用卡支付</label></div>' +                    '<div class="radio i-checks"> <label><input type="radio" name="recipientType" value="cash"> <i></i>现金支付</label></div>';            } else if ('creditcard' == item['recipientType']) {                txt += '<div class="radio i-checks"><label><input type="radio" name="recipientType" value="alipay" ><i></i>支付宝</label></div>' +                    '<div class="radio i-checks"><label><input type="radio" name="recipientType" value="wechat" ><i></i>微信支付</label></div>' +                    '<div class="radio i-checks"> <label><input type="radio" name="recipientType" value="creditcard" checked><i></i>信用卡支付</label></div>' +                    '<div class="radio i-checks"> <label><input type="radio" name="recipientType" value="cash"> <i></i>现金支付</label></div>';            } else {                txt += '<div class="radio i-checks"><label><input type="radio" name="recipientType" value="alipay"><i></i>支付宝</label></div>' +                    '<div class="radio i-checks"><label><input type="radio" name="recipientType"  value="wechat" ><i></i>微信支付</label></div>' +                    '<div class="radio i-checks"> <label><input type="radio" name="recipientType" value="creditcard" ><i></i>信用卡支付</label></div>' +                    '<div class="radio i-checks"> <label><input type="radio" name="recipientType" value="cash" checked> <i></i>现金支付</label></div>';            }            txt += '</div></div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group">' +                '<label class="col-sm-3 control-label">支付账号</label>' +                '<div class="col-sm-5">' +                '<input type="text" class="form-control rounded" id="recipientAccount" value="' + item['recipientAccount'] + '">' +                '</div>' +                '</div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group"><label class="col-sm-3 control-label">租金线上支付状态</label><div class="col-sm-3"><label class="switch">';            if (item['rentOnline']) {                txt += '<input type="checkbox"  id="rentOnline" checked >';            } else {                txt += '<input type="checkbox" id="rentOnline">';            }            txt += '<span></span> </label></div></div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group"><label class="col-sm-3 control-label">租金供应商占比</label><div class="col-sm-3"><div class="input-group m-b"><input type="text" class="form-control" placeholder="0.00" id="rentPercent" value="' + item['rentPercent'] + '"/><span class="input-group-addon">%</span></div></div></div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group"><label class="col-sm-3 control-label">押金线上支付状态</label><div class="col-sm-3"><label class="switch">';            if (item['depositOnline']) {                txt += '<input type="checkbox" id ="depositOnline" checked />';            } else {                txt += '<input type="checkbox" id ="depositOnline" />';            }            txt += '<span></span> </label></div></div>' +                '<div class="line line-dashed b-b line-lg pull-in"></div>' +                '<div class="form-group"><label class="col-sm-3 control-label">押金供应商占比</label><div class="col-sm-3"><div class="input-group m-b"><input type="text" class="form-control"  placeholder="0.00" id="depositPercent" value="' + item['depositPercent'] + '"/><span class="input-group-addon">%</span></div></div></div>' +                '</form>' +                '</div>' +                '</section>';        }        show(txt);    }            function show(htmlContent) {        zeroModal.show({            title: '资讯信息',            content: htmlContent + '',            width: '30%',            height: '60%',            escape: true,            buttons: [{                className: 'zeromodal-btn zeromodal-btn-primary',                name: '保存',                fn: function (opt) {                    buildData();                }            }, {                className: 'zeromodal-btn zeromodal-btn-default',                name: '取消',                fn: function (opt) {                }            }]        });        bindUpload({            "id": 'newPic',            finish: function (file) {                var newUploadId = getRandomId(10);                var picSizeNow = $("div[name='detail_pic_group']").size();                var txt = '<div class="form-group" name="detail_pic_group" id="' + newUploadId + '"><label class="col-sm-2 control-label"></label><div class="m-r col-sm-2">' +                    '<img src="' + file + '" name="ImgDetailPic" class="r r-2x" width="100%" height="100px" id="img' + newUploadId + '" ></div><div class="m-r col-sm-3">' +                    '<br><button class="btn btn-danger" onclick="removePic(\'' + newUploadId + '\')"><i class="fa fa-trash-o"></i>&nbsp;&nbsp;&nbsp;<span>删除图片</span></button>' +                    '<div class="radio i-checks"><label><input type="radio" name="detailpic" ' + (0 == picSizeNow ? "checked" : "") + ' value="' + newUploadId + '" ><i></i>设置为列表展示图</label></div></div></div>';                $('#productDetailPicDiv').append(txt);            }        });    }    function loadScript(url) {		var script = document.createElement("script");		script.type = "text/javascript";		script.src = url;		document.body.appendChild(script);	}    function getRandomId(len) {        len = len || 32;        var chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';        var maxPos = chars.length;        var pwd = '';        for (i = 0; i < len; i++) {            pwd += chars.charAt(Math.floor(Math.random() * maxPos));        }        return (Date.parse(new Date()) / 1000) + pwd;    }    function removePic(index) {        $("#" + index).remove();    }</script><!-- Bootstrap --><script src="/js/bootstrap.js"></script><!-- App --><script src="/js/app.js"></script><script src="/js/slimscroll/jquery.slimscroll.min.js"></script><script src="/js/app.plugin.js"></script></body></html>